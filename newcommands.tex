% New names for derivatives
\newcommand{\odv}[3][1]{\diff[#1]{#2}{#3}}
\newcommand{\pdv}[3][1]{\diffp[#1]{#2}{#3}}
\newcommand{\fdv}[3][1]{\diff.delta.[#1]{#2}{#3}}

% Shorthands
\newcommand{\dd}{\mathrm{d}}

% Expectation value
\newcommand{\E}[1]{\left \langle #1 \right \rangle}

% Fancy letters     
\newcommand{\Eff}{\mathcal F}
\newcommand{\D}{\mathcal D}
\newcommand{\Ce}{\mathcal C}
\newcommand{\A}{\mathcal A}
\newcommand{\Oh}{\mathcal O}
\newcommand{\V}{\mathcal V}
\newcommand{\Ci}{\mathcal C}
\newcommand{\N}{\mathcal N}
\newcommand{\He}{\mathcal H}
\newcommand{\Ell}{\mathcal L}
\newcommand{\Em}{\mathcal M}
\newcommand{\J}{\mathcal J}
\newcommand{\Es}{\mathcal S}
\newcommand{\Ge}{\mathcal G}
\newcommand{\Te}{\mathcal T}
\newcommand{\Ex}{\mathcal X}
\newcommand{\Pe}{\mathcal P}
\newcommand{\Ess}{\mathcal S}
\newcommand{\Essdot}{\mathcal{\dot S}}
\newcommand{\Eh}{\mathcal E}
\newcommand{\En}{\mathcal N}
\newcommand{\Je}{\mathcal J}
\newcommand{\T}{\mathcal T}
\newcommand{\K}{\mathcal K}
\newcommand{\C}{\mathbb C}
\newcommand{\R}{\mathbb R}
\newcommand{\Z}{\mathbb Z}
\newcommand{\NN}{\mathbb N}

\newcommand{\br}{\mathbf}

\renewcommand{\Im}{\mathrm{Im}}
\renewcommand{\Re}{\mathrm{Re}}


% Operations
\newcommand{\Tr}{\mathrm{Tr}}

% Means-square limit
\newcommand{\mslim}[1]{ \underset{#1}{ \operatorname{ms-lim} }}
\newcommand{\res}{\mathrm{Res}}
\newcommand{\const}{\mathrm{const.}}
\DeclareMathOperator{\sgn}{sgn}

% identity operator
\newcommand{\one}{\text{\usefont{U}{bbold}{m}{n}1}}
\MakeRobust{\one}

% Set builder notation
\newcommand{\setbuilder}[2]{\left\{\, #1 \mid #2 \,\right\}}

% comments
\newcommand{\note}[1]{\todo[inline,size=\normalsize,color=SkyBlue]{ #1 }}
\newcommand{\MJ}[1]{\textcolor{red}{\texttt{[MJ: #1]}}}


% Thanks to Kleinert!
% Make feynmp nice
\newcommand{\setval}{
    \fmfset{wiggly_len}{2 mm}
    \fmfset{arrow_len}{3mm}
    \fmfset{arrow_ang}{13}
    \fmfset{dash_len}{2mm}
    \fmfpen{0.25mm}
    \fmfset{dot_size}{1.5thick}
}

\newcommand{\fmftri}[1]{\fmfv{decor.shape=triangle,decor.angle=-90,decor.size=1.2thick}{#1}}
\newcommand{\fmftriinv}[1]{\fmfv{decor.shape=triangle,decor.angle=90,decor.size=1.2thick}{#1}}
\newcommand{\fmfsq}[1]{\fmfv{decor.shape=square,decor.size=1.2thick}{#1}}
\newcommand{\fmfsqside}[1]{\fmfv{decor.shape=square,decor.angle=45,decor.size=1.2thick}{#1}}
\newcommand{\fmfcounter}[1]{\fmfv{decor.size=2thick,l=${\bm{\otimes}}$,l.dist=0}{#1}}
\newcommand{\comma}{,} % This is needed for commas in the feynman diagrams...